<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Yelp scores of coffee shops in Durham, NC</title>
		<script src="../d3.js" charset="utf-8"></script>
		<style media="screen">
			body {
				background-color: lightGrey;
				font-family: Helvatica, sans-serif;
			}

			svg	{
				background-color: white;
				box-shadow: 3px 3px 5px #ccc;
			}
		</style>
	</head>
	<body>
		<h2>Traffic Fatalities in North Carolina, 2012</h2>
	</body>
	<script type="text/javascript">
		var dataset = [{month: 'January', fatalities: 73}, {month: 'February', fatalities: 86}, {month: 'March', fatalities: 97},
		 	{month: 'April', fatalities: 85}, {month: 'May', fatalities: 109}, {month: 'June', fatalities: 118},
		 	{month: 'July', fatalities: 125}, {month: 'August', fatalities: 120}, {month: 'September', fatalities: 128},
			{month: 'October', fatalities: 116},{month: 'November', fatalities: 110}, {month: 'December', fatalities: 95}];

		var w = 500;
		var h = 700;
		var padding = [ 50, 20, 30, 50];


		var xScale = d3.scale.ordinal()
			// .domain(d3.range(dataset.length))
			.domain(dataset.map(function(d){ console.log(d); return d.month; }))
			.rangeRoundBands([padding[3], w - padding[1] ], 0.1);

		var yScale = d3.scale.linear()
			.domain([0, d3.max(dataset, function(d){ return d.fatalities; })])
			.range([0 , h - padding[0] - padding[2] ]);


		var xAxis = d3.svg.axis()
			.scale(xScale)
			.orient('bottom');

		var yAxis = d3.svg.axis()
			.scale(yScale)
			.orient('left');

		var svg = d3.select('body')
			.append('svg')
			.attr({
				width: w,
				height: h
			});

		var rects = svg.selectAll('rect')
			.data(dataset)
			.enter()
			.append('rect');

		rects.attr({
				x: function(d){ return xScale(d.month); },
				y:  function(d){ return  h - padding[2] - yScale(d.fatalities); },
				width: xScale.rangeBand(),
				height: 0,
				fill: 'steelblue'
		 	})
			.append('title')
			.text(function(d){
				return d.month + "'s traffic fatalities.";
			});

		rects.transition()
			.duration(500)
			.attr({
				height: function(d){
					return yScale(d.fatalities);
				}
			});

	</script>
</html>
